<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
	<title>fontomatic 3.0</title>
	<script type="text/javascript" src="js/jquery.js"></script>
	<script type="text/javascript">
	
		var rsvpOptions = {
			alignInputName:  'text_align',
			colorInputId:   'font_color',
			fontInputId:    'font_face',
			textInputId:    'rsvp',
			targetImageId:  'rsvpImg',
			targetParentId: 'rsvpDiv',
		}

		var wordingOptions = {
			align:          'C',          // alignment is fixed
			colorInputId:   'font_color',
			fontInputId:    'font_face',
			textInputId:    'text',
			targetImageId:  'wordingImg',
			targetParentId: 'wordingDiv',
		}

		function updateImage(options)
		{	
			var data = '';
			data += '&color=' + $('#'+options.colorInputId).val();
			data += '&font=' + $('#' + options.fontInputId + ' option:selected').text();
			data += '&text=' + $('#'+options.textInputId).val();
			data += '&sessionItem=' + options.targetImageId + '-';
			
			if (options.alignInputName)
			{
				data += "&align=" + $('input[@name=\''+ options.alignInputName+'\']:checked').val();
			}
			else if (options.align)
			{
				data += "&align=" + options.align;
			}
			
			$.ajax({
			  type: "POST",
			  url: "set-values.php",
			  data: data,
			  success: function(msg){

				var imageSrc = 'image.php?t=' + (new Date()).getTime() + '&sessionItem=' + options.targetImageId + '-';
				
				if ( $('#'+options.targetImageId).length == 1 ) // if the image exists
				{	// update the src attribute
					$('#'+options.targetImageId).attr( 'src', imageSrc );
				}
				else
				{	// add the image
					$('#'+options.targetParentId).empty().append('<img id="'+options.targetImageId+'" src="' + imageSrc + '" />');
				}
			  }
			});
		}
				
		$(document).ready(function(){
	
			// load the initial images
			updateImage(rsvpOptions);
			updateImage(wordingOptions);
	
			// update text alignment in rsvp address
			$("input[@name='text_align']").click(function(){
				$('#rsvp').css('text-align', $("input[@name='text_align']:checked").attr('title') );
				updateImage(rsvpOptions);
			});
			
			// update the font face
			$('#font_face').change(
				function()
				{
					updateImage(rsvpOptions);
					updateImage(wordingOptions);
				}
			);
			
			// Update the wording text/rsvp text
			$('#text').keyup( function(){ updateImage(wordingOptions); } );		
			$('#rsvp').keyup( function(){ updateImage(rsvpOptions); } );
			
			// update the font color
			$('#fontColorSelector span').click(function(){
	
				$(this).addClass('on');
				$(this).siblings().removeClass('on');			
				$('#font_color').val( $(this).text() );	
						
				updateImage(rsvpOptions);
				updateImage(wordingOptions);
			});
			
		});
		
	</script>
	
	<style type="text/css">
		body { width: 795px; margin: 20px auto; font-family: helvetica,sans-serif; border-top: 6px solid #ddd; padding-top:10px; }
		select { width: 100%; font-family: helvetica,sans-serif; }
		textarea { background-color: #fafafa;  width: 100%; height: 15em; font-family: helvetica,sans-serif; text-align: center;  }
		#rsvp { height: 6em;}
		
		#form  { width: 300px; float: left; border: 0 solid #ddd; margin-right: 20px;  } 
		#target { width: 420px; float: left; border: 0 solid #ddd;  }
		label {display: block; padding-top: 10px; clear: both; }
		label.radio { display: inline;}
		#form form, #target div { padding: 10px; }
		h1 {font-size: 1.4em; }
		h2 {margin: 10px 10px 0 10px; padding:0; font-size: 1em; }
		img {margin:0;padding:0;}
		
		
		
		#colorBlack    { background-color: #000;  }
		#colorPink     { background-color: #f99;  }
		#colorBurgundy { background-color: #936;  }
		#colorGold     { background-color: #c93;  }
		#colorSilver   { background-color: #999;  }

		#fontColorSelector span { display: block; width: 30px; height:30px; float:left; border: 4px solid #fff; text-indent: -9000px; }
		#fontColorSelector span.on { border: 4px solid #ccc;}
		#fontColorSelector span:hover {border: 4px solid red;}
		code { font-family: monaco, fixed-width; }
	</style>
	
</head>
<body>
	
	<h1>fontomatic 3.0</h1>
	<h2>Example 'in-place WYSIWYG' editor</h2>
	
	<p>
		Written in PHP and javascript without any external dependancy by <a href="https://davidsimpson.me/">David Simpson</a> in 2006 using <a href="http://php.net/manual/en/function.imagecreate.php"><code>imagecreate</code></a> and <a href="http://php.net/manual/en/function.imagettfbbox.php"><code>imagettfbbox</code></a>.
	</p>
	
	<div id="form">
		<h2>Edit text/ font here:</h2>
		<form action="#" method="post">
			
			<label for="font_face">Font:</label>
			<select name="font_face" id="font_face">
				
				<option>Arial</option>
				<option>Bickley</option>
				<option>Carlton</option>
				<option>English Script</option>		
				<option>Freehand</option>
				<option>Gill Sans</option>
				<option>Lino Script</option>
				<option>Nuptial Script</option>
				<option>Old English</option>
				<option>Pyrennesi</option>
				
			</select>
			<br/>
			
			
			
			<label for="font_color">Color:</label>
			<input type="hidden" id="font_color" name="font_color" value="0,0,0" />
			
			<div id="fontColorSelector">
				<span id="colorBlack" title="Black">0,0,0</span>
				<span id="colorPink" title="Pink">255,153,153</span>
				<span id="colorBurgundy" title="Burgundy">204,102,153</span>
				<span id="colorGold" title="Gold">204,204,102</span>
				<span id="colorSilver" title="Silver" class="on">153,153,153</span>
			</div>
			
			<label for="text">Align:</label>
			
			<input type="radio" id="text_align0" name="text_align" value="L" title="left" />
			<label class="radio" for="text_align0">Left</label>
			
			<input type="radio" id="text_align1" name="text_align" value="C" title="center" />
			<label class="radio" for="text_align1">Centre</label>
			
			<input type="radio" id="text_align2" name="text_align" value="R" title="right" />
			<label class="radio" for="text_align2">Right</label>
			
			
			<label for="text">Text:</label>
			<textarea name="text" id="text">Type text here to see it 
displayed in the chosen font</textarea>

			<label for="rsvp">RSVP:</label>
			<textarea name="rsvp" id="rsvp">3 Somewhere Road
Some Place
Some City
SC4 3SP</textarea>
		</form>	
	</div>
	
	<div id="target">
		<h2>Wording in chosen font</h2>
		<div>Type some text in the textarea and it should update over here.</div>
		<div id="wordingDiv"></div>
		<div id="rsvpDiv"></div>
	</div>
	
	
	
	
</body>
</html>